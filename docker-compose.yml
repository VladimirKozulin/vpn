
# Главный docker-compose файл

services:
  # PostgreSQL база данных для VPN
  postgres:
    extends:
      file: devOps/data/docker-compose.yml
      service: postgres

  # PostgreSQL база данных для Keycloak
  keycloak-postgres:
    extends:
      file: devOps/auth/docker-compose.yml
      service: keycloak-postgres

  # Keycloak сервер аутентификации
  keycloak:
    extends:
      file: devOps/auth/docker-compose.yml
      service: keycloak

  # VPN сервер
  vpn-server:
    extends:
      file: devOps/server/docker-compose.yml
      service: vpn-server

volumes:
  postgres-data:
    driver: local
  keycloak-postgres-data:
    driver: local
  gradle-cache:
    driver: local

networks:
  vpn-network:
    driver: bridge
